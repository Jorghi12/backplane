@import "tailwindcss";
@import "tw-animate-css";

/* -------------------------------------------------------
   Design tokens (single source of truth)
   - HSL values power Tailwind v4 CSS variables.
   - Brand tuned for “executive orange” accents.
-------------------------------------------------------- */
@custom-variant dark (&:is(.dark *));
@variant dark (&:is(.dark *));

@layer base {
  :root {
    /* Neutrals (readability first) */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;          /* near-black for crisp copy */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Brand (enterprise orange) */
    --brand: 24 96% 52%;
    --brand-ink: 222 47% 11%;

    /* UI primitives */
    --primary: var(--brand);
    --primary-foreground: 0 0% 100%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;
    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;
    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    /* Borders / inputs / rings */
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: var(--brand);

    /* Charts (subtle, not candy) */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    /* Sidebar (if/when you use it) */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5% 26%;
    --sidebar-primary: 240 6% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 5% 96%;
    --sidebar-accent-foreground: 240 6% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217 91% 60%;

    /* Radii & elevation */
    --radius: .6rem;
    --elev-1: 0 1px 2px rgba(17, 24, 39, .06), 0 1px 1px rgba(17, 24, 39, .04);
    --elev-2: 0 2px 8px rgba(17, 24, 39, .08), 0 8px 24px rgba(17, 24, 39, .08);
    --elev-3: 0 8px 24px rgba(17, 24, 39, .12), 0 24px 48px rgba(17, 24, 39, .12);
  }

  .dark {
    --background: 222 84% 5%;
    --foreground: 0 0% 98%;
    --card: 222 84% 5%;
    --card-foreground: 0 0% 98%;
    --popover: 222 84% 5%;
    --popover-foreground: 0 0% 98%;

    --brand: 22 94% 56%;                 /* slightly brighter in dark */
    --brand-ink: 0 0% 98%;

    --primary: var(--brand);
    --primary-foreground: 222 47% 11%;
    --secondary: 217 33% 18%;
    --secondary-foreground: 0 0% 98%;
    --muted: 217 33% 18%;
    --muted-foreground: 215 20% 65%;
    --accent: 217 33% 18%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 0 0% 98%;

    --border: 217 33% 18%;
    --input: 217 33% 18%;
    --ring: 22 94% 56%;

    --sidebar-background: 240 6% 10%;
    --sidebar-foreground: 240 5% 96%;
    --sidebar-primary: 224 76% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 4% 16%;
    --sidebar-accent-foreground: 240 5% 96%;
    --sidebar-border: 240 4% 16%;
    --sidebar-ring: 217 91% 60%;
  }
}

/* Map tokens to Tailwind’s CSS variables */
@theme inline {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* -------------------------------------------------------
   Base + typography
-------------------------------------------------------- */
@layer base {
  *,
  ::before,
  ::after,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-border, currentColor);
  }

  * {
    @apply border-border;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground;
    font-family: "Manrope", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    font-feature-settings: "cv01","cv02","cv03","cv04","ss01","ss02";
    font-variation-settings: "wght" 500;
    text-wrap: pretty;
  }

  h1, h2, h3 {
    text-wrap: balance;      /* keeps hero & section headings tidy */
    letter-spacing: -0.01em;
  }

  ::selection {
    background: hsl(var(--brand) / .18);
    color: hsl(var(--foreground));
  }

  /* Accessible focus — visible, brand‑correct, subtle */
  :where(a, button, [role="button"], input, select, textarea):focus-visible {
    outline: none;
    box-shadow:
      0 0 0 3px hsl(var(--primary) / .18),
      0 0 0 1.5px hsl(var(--primary));
    border-radius: max(6px, var(--radius-sm));
  }

  /* High contrast mode */
  @media (prefers-contrast: more) {
    :where(a, button, [role="button"], input, select, textarea):focus-visible {
      box-shadow:
        0 0 0 4px hsl(var(--primary) / .28),
        0 0 0 2px hsl(var(--primary));
    }
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
      transition: none !important;
      scroll-behavior: auto;
    }
  }
}

/* -------------------------------------------------------
   Surfaces & elevation (used throughout cards/stats)
   Applies automatically to common patterns without
   changing your JSX in page.tsx.
-------------------------------------------------------- */
@layer components {
  /* Generic elevated white surface */
  .bg-white.border.border-gray-200 {
    box-shadow: var(--elev-1);
    transition: box-shadow .2s ease, transform .2s ease, border-color .2s ease;
    border-radius: var(--radius-lg);
  }
  .bg-white.border.border-gray-200:hover {
    box-shadow: var(--elev-2);
  }

  /* “Stat” tiles (.border.border-gray-200 without bg) */
  .border.border-gray-200:not(.bg-white) {
    transition: box-shadow .2s ease, transform .2s ease, border-color .2s ease;
    border-radius: var(--radius-lg);
    box-shadow: var(--elev-1);
  }

  /* Hero code panel / dark surfaces */
  .ring-1.ring-white\/10,
  .ring-1.ring-black\/10 {
    box-shadow: var(--elev-2);
  }
}

/* -------------------------------------------------------
   Code blocks & inline code
   (Hero YAML / SDK and Policy tab)
-------------------------------------------------------- */
@layer components {
  pre {
    background: color-mix(in oklab, hsl(222 84% 5%) 92%, hsl(0 0% 100%));
    border-radius: calc(var(--radius-lg) - 2px);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
  }

  pre, code, kbd, samp {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 12.5px;
    line-height: 1.6;
  }

  code:not(pre code) {
    padding: .15rem .35rem;
    border-radius: .375rem;
    background: hsl(222 16% 92%);
    color: hsl(222 47% 18%);
  }

  .dark code:not(pre code) {
    background: hsl(220 10% 20%);
    color: hsl(0 0% 98%);
  }
}

/* -------------------------------------------------------
   Range slider (Governed Canary control in hero panel)
-------------------------------------------------------- */
@layer components {
  input[type="range"] {
    height: 1.5rem;
    -webkit-appearance: none;
    background: transparent;
  }
  input[type="range"]::-webkit-slider-runnable-track {
    height: 6px;
    border-radius: 999px;
    background: linear-gradient(90deg,
      hsl(var(--brand) / .9) 0%,
      hsl(var(--brand) / .9) var(--tw-range-progress, 50%),
      hsl(222 12% 22% / .7) var(--tw-range-progress, 50%),
      hsl(222 12% 22% / .7) 100%);
  }
  input[type="range"]::-moz-range-track {
    height: 6px;
    border-radius: 999px;
    background: hsl(222 12% 22% / .7);
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    margin-top: -6px;
    width: 18px; height: 18px;
    border-radius: 999px;
    background: hsl(0 0% 100%);
    border: 2px solid hsl(var(--brand));
    box-shadow: 0 1px 2px rgba(17, 24, 39, .18);
    transition: transform .12s ease, box-shadow .2s ease;
  }
  input[type="range"]::-moz-range-thumb {
    width: 18px; height: 18px;
    border-radius: 999px;
    background: hsl(0 0% 100%);
    border: 2px solid hsl(var(--brand));
    box-shadow: 0 1px 2px rgba(17, 24, 39, .18);
  }
  input[type="range"]:active::-webkit-slider-thumb {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(17, 24, 39, .24);
  }
}

/* -------------------------------------------------------
   Utility polish (small but high‑leverage)
-------------------------------------------------------- */
@layer utilities {
  .text-balance { text-wrap: balance; }
  .heading-tight { letter-spacing: -0.015em; }
  .shadow-e1 { box-shadow: var(--elev-1); }
  .shadow-e2 { box-shadow: var(--elev-2); }
  .shadow-e3 { box-shadow: var(--elev-3); }

  /* Smooth hover raise for cards */
  .hover-raise {
    transition: transform .18s ease, box-shadow .2s ease;
  }
  .hover-raise:hover { transform: translateY(-2px); box-shadow: var(--elev-2); }

  /* Subtle divider color */
  .divide-muted > :not([hidden]) ~ :not([hidden]) {
    border-color: hsl(var(--border));
  }
}
